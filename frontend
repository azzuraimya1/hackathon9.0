
import javafx.application.Application;
import javafx.stage.Stage;

public class Main extends Application {

    @Override
    public void start(Stage primaryStage) {
        // Launch the login system directly
        LoginController loginApp = new LoginController();
        try {
            loginApp.start(primaryStage);
        } catch (Exception ex) {
            ex.printStackTrace();
        }
    }

    public static void main(String[] args) {
        LoginController.main(args);
    }
}







import javafx.geometry.Insets;
import javafx.geometry.Pos;
import javafx.scene.Scene;
import javafx.scene.control.*;
import javafx.scene.layout.*;
import javafx.scene.text.Font;
import javafx.stage.Stage;
import java.io.FileWriter;
import java.io.PrintWriter;
import java.io.IOException;
import java.time.LocalDateTime;

public class LoginController extends Application {

    private final String LOG_FILE = "user_logins.txt";

    @Override
    public void start(Stage primaryStage) {
        primaryStage.setTitle("Medtronic Portal");



        // --- Main Menu ---
        Button newUserButton = new Button("New User Login");
        Button returningUserButton = new Button("Returning User Login");

        newUserButton.getStyleClass().add("main-button");
        returningUserButton.getStyleClass().add("main-button");

        newUserButton.setOnAction(e -> showNewUserScene(primaryStage));
        returningUserButton.setOnAction(e -> showReturningUserScene(primaryStage));

        VBox mainMenu = new VBox(20, newUserButton, returningUserButton);
        mainMenu.setAlignment(Pos.CENTER);
        mainMenu.setPadding(new Insets(40));
        mainMenu.getStyleClass().add("main-menu");

        Scene menuScene = new Scene(mainMenu, 500, 350);
        menuScene.getStylesheets().add(getClass().getResource("styles.css").toExternalForm());
        primaryStage.setScene(menuScene);
        primaryStage.show();
    }

    // --- New User Registration ---
    private void showNewUserScene(Stage stage) {
        TextField firstNameField = new TextField();
        TextField lastNameField = new TextField();
        DatePicker dobPicker = new DatePicker();
        TextField usernameField = new TextField();
        PasswordField passwordField = new PasswordField();
        PasswordField confirmPasswordField = new PasswordField();

        Button saveButton = new Button("Create Account");
        Button backButton = new Button("Back");
        GridPane grid = new GridPane();
        grid.setHgap(10);
        grid.setVgap(15);
        grid.setAlignment(Pos.CENTER);

        grid.add(new Label("First Name:"), 0, 0);
        grid.add(firstNameField, 1, 0);
        grid.add(new Label("Last Name:"), 0, 1);
        grid.add(lastNameField, 1, 1);
        grid.add(new Label("Date of Birth:"), 0, 2);
        grid.add(dobPicker, 1, 2);
        grid.add(new Label("Username:"), 0, 3);
        grid.add(usernameField, 1, 3);
        grid.add(new Label("Password:"), 0, 4);
        grid.add(passwordField, 1, 4);
        grid.add(new Label("Confirm Password:"), 0, 5);
        grid.add(confirmPasswordField, 1, 5);

        HBox buttonBox = new HBox(15, saveButton, backButton);
        buttonBox.setAlignment(Pos.CENTER_RIGHT);
        grid.add(buttonBox, 1, 6);

        grid.getStyleClass().add("form-grid");
        saveButton.getStyleClass().add("action-button");
        backButton.getStyleClass().add("action-button");

        saveButton.setOnAction(e -> {
            if (firstNameField.getText().isEmpty() || lastNameField.getText().isEmpty() ||
                    dobPicker.getValue() == null || usernameField.getText().isEmpty() ||
                    passwordField.getText().isEmpty() || confirmPasswordField.getText().isEmpty()) {
                showAlert(Alert.AlertType.WARNING, "Input Error", "All fields are required.");
                return;
            }
            if (!passwordField.getText().equals(confirmPasswordField.getText())) {
                showAlert(Alert.AlertType.WARNING, "Password Mismatch", "Passwords do not match!");
                return;
            }
            saveNewUser(firstNameField.getText(), lastNameField.getText(),
                    dobPicker.getValue().toString(), usernameField.getText(), passwordField.getText());
            showAlert(Alert.AlertType.INFORMATION, "Success", "Account created successfully!");

            firstNameField.clear();
            lastNameField.clear();
            dobPicker.setValue(null);
            usernameField.clear();
            passwordField.clear();
            confirmPasswordField.clear();
        });

        backButton.setOnAction(e -> start(stage));

        Scene scene = new Scene(grid, 600, 450);
        scene.getStylesheets().add(getClass().getResource("styles.css").toExternalForm());
        stage.setScene(scene);
    }

    // --- Returning User Login ---
    private void showReturningUserScene(Stage stage) {
        TextField usernameField = new TextField();
        PasswordField passwordField = new PasswordField();
        Button loginButton = new Button("Login");
        Button backButton = new Button("Back");

        GridPane grid = new GridPane();
        grid.setHgap(10);
        grid.setVgap(15);
        grid.setAlignment(Pos.CENTER);

        grid.add(new Label("Username:"), 0, 0);
        grid.add(usernameField, 1, 0);
        grid.add(new Label("Password:"), 0, 1);
        grid.add(passwordField, 1, 1);

        HBox buttonBox = new HBox(15, loginButton, backButton);
        buttonBox.setAlignment(Pos.CENTER_RIGHT);
        grid.add(buttonBox, 1, 2);

        grid.getStyleClass().add("form-grid");
        loginButton.getStyleClass().add("action-button");
        backButton.getStyleClass().add("action-button");

        loginButton.setOnAction(e -> {
            if (usernameField.getText().isEmpty() || passwordField.getText().isEmpty()) {
                showAlert(Alert.AlertType.WARNING, "Login Error", "Please enter username and password.");
            } else {
                showAlert(Alert.AlertType.INFORMATION, "Welcome Back!", "Welcome, " + usernameField.getText() + "!");
                usernameField.clear();
                passwordField.clear();
            }
        });

        backButton.setOnAction(e -> start(stage));

        Scene scene = new Scene(grid, 500, 300);
        scene.getStylesheets().add(getClass().getResource("styles.css").toExternalForm());
        stage.setScene(scene);
    }

    // --- Save New User Info ---
    private void saveNewUser(String firstName, String lastName, String dob, String username, String password) {
        String timestamp = LocalDateTime.now().toString();
        try (PrintWriter out = new PrintWriter(new FileWriter(LOG_FILE, true))) {
            out.println(String.format("%s | %s %s | DOB: %s | Username: %s | Password: %s",
                    timestamp, firstName, lastName, dob, username, password));
        } catch (IOException e) {
            showAlert(Alert.AlertType.ERROR, "System Error", "Error saving new user: " + e.getMessage());
        }
    }

    // --- Alert Utility ---
    private void showAlert(Alert.AlertType type, String title, String message) {
        Alert alert = new Alert(type);
        alert.setTitle(title);
        alert.setHeaderText(null);
        alert.setContentText(message);
        alert.showAndWait();
    }

    public static void main(String[] args) {
        launch(args);
    }
}











